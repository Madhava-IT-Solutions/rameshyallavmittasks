<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Confirmation Page</title>
  <link rel="stylesheet" href="style2.css">
</head>
<body>
  <div class="confirmation-container">
    <h1>Confirmation</h1>
    <p id="confirmation-message">Please wait while we retrieve your tender details...</p>

    <div id="tender-details">
      <!-- Tender details will be loaded here -->
    </div>

    <button onclick="goBack()">Go Back</button>
  </div>

  <script>
    // Fetch tender details using the ID from the URL
    const urlParams = new URLSearchParams(window.location.search);
    const tenderId = urlParams.get('id');

    async function loadTenderDetails() {
      const response = await fetch(`https://tenders-4ezx.onrender.com/api/tenders/${tenderId}`);
      const tender = await response.json();
      const tenderDetailsElement = document.getElementById('tender-details');
      
      if (tender) {
        tenderDetailsElement.innerHTML = `
          <h2>Tender ID: ${tender.id}</h2>
          <p><strong>Name of Work:</strong> ${tender.name_of_work}</p>
          <p><strong>Area:</strong> ${tender.area}</p>
          <p><strong>Plinth Area:</strong> ${tender.plinth_area}</p>
          <p><strong>State:</strong> ${tender.state}</p>
          <p><strong>District:</strong> ${tender.district}</p>
          <p><strong>Place:</strong> ${tender.place}</p>
          <p><strong>Nature of Work:</strong> ${tender.nature_of_work}</p>
          <p><strong>Tender Published On:</strong> ${tender.tender_published_on}</p>
          <p><strong>Tender Response By:</strong> ${tender.tender_response_by}</p>
          <p><strong>BoQ File:</strong> <a href="/uploads/${tender.boq_file}" download>Download</a></p>
        `;
      } else {
        tenderDetailsElement.innerHTML = `<p>No details found for this tender.</p>`;
      }
    }

    // Call the function to load tender details
    loadTenderDetails();

    function goBack() {
      window.history.back();
    }
  </script>
</body>
</html>
